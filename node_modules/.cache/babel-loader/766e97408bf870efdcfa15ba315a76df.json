{"ast":null,"code":"import _classCallCheck from \"/Users/swalihvpm/Desktop/django-react/LD-gcloud/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/swalihvpm/Desktop/django-react/LD-gcloud/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/swalihvpm/Desktop/django-react/LD-gcloud/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/swalihvpm/Desktop/django-react/LD-gcloud/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/swalihvpm/Desktop/django-react/LD-gcloud/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/swalihvpm/Desktop/django-react/LD-gcloud/src/components/ld/shopHome/product-list-item.jsx\";\nimport React, { Component } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport Modal from \"react-responsive-modal\";\nimport { authAxios } from \"../../../authAxios\";\nimport { addToCartURL } from \"../../../constants\";\nimport { connect } from \"react-redux\";\nimport { fetchCart } from \"../../../actions/cart\";\nimport { Redirect } from \"react-router-dom\";\nimport { ToastContainer, toast } from \"react-toastify\";\nimport \"react-toastify/dist/ReactToastify.css\";\n\nvar ProductListItem =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(ProductListItem, _Component);\n\n  function ProductListItem(props) {\n    var _this;\n\n    _classCallCheck(this, ProductListItem);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ProductListItem).call(this, props));\n\n    _this.minusQty = function () {\n      if (_this.state.quantity > 1) {\n        _this.setState({\n          stock: \"InStock\"\n        });\n\n        _this.setState({\n          quantity: _this.state.quantity - 1\n        });\n\n        _this.props.onDecrementClicked();\n      } else {\n        // console.log(\"removefromcart\");\n        _this.setState({\n          openQuantity: false\n        });\n\n        _this.props.onRemoveFromCart();\n      }\n    };\n\n    _this.plusQty = function () {\n      if (_this.props.product.stock >= _this.state.quantity) {\n        _this.setState({\n          quantity: _this.state.quantity + 1\n        });\n\n        _this.props.onIncrementClicked();\n\n        _this.props.refreshCart();\n      } else {\n        _this.setState({\n          stock: \"Out of Stock !\"\n        });\n      }\n    };\n\n    _this.changeQty = function (e) {\n      _this.setState({\n        quantity: parseInt(e.target.value)\n      });\n    };\n\n    _this.updateQty = function (e) {\n      if (_this.props.product.stock >= parseInt(e.target.value)) {\n        _this.setState({\n          quantity: parseInt(e.target.value)\n        });\n\n        _this.props.onAddToCartClicked();\n\n        _this.props.refreshCart();\n      } else {\n        _this.setState({\n          stock: \"Out of Stock !\"\n        });\n      }\n    };\n\n    _this.plusQty2 = function (id, shop) {\n      // this.setState({ openQuantity: true });\n      console.log(\"plus qnt\");\n\n      _this.setState({\n        quantity: _this.state.quantity + 1\n      });\n\n      _this.props.refreshCart();\n\n      _this.handleAddToCart2(id, shop);\n    };\n\n    _this.minusQty2 = function (id) {\n      if (_this.state.quantity > 1) {\n        _this.setState({\n          quantity: _this.state.quantity - 1\n        });\n\n        _this.props.refreshCart();\n      } else {\n        _this.setState({\n          openQuantity: false\n        });\n      }\n\n      console.log(\"minus qnt\"); // this.handleAddToCart2(id, shop);\n    };\n\n    _this.openQuantity = function (id, shop) {\n      _this.props.refreshCart();\n\n      _this.setState({\n        openQuantity: true\n      });\n\n      _this.handleAddToCart2(id, shop);\n    };\n\n    _this.handleAddToCart2 = function (id, shop) {\n      console.log(_this.props.token);\n\n      if (_this.props.token !== null) {\n        _this.setState({\n          loading: true\n        });\n\n        _this.setState({\n          openQuantity: true\n        });\n\n        authAxios.post(addToCartURL, {\n          id: id,\n          shop: shop\n        }).then(function (res) {\n          _this.props.refreshCart();\n\n          _this.setState({\n            loading: false\n          });\n        }).catch(function (err) {\n          _this.setState({\n            error: err,\n            loading: false\n          });\n\n          toast.error(\"Oops there was an error\");\n        });\n      } else {\n        toast.error(\"To add item into your cart, please login\");\n\n        _this.callback();\n      }\n    };\n\n    _this.callback = function () {\n      _this.setState({\n        notLoggedIn: true\n      });\n    };\n\n    _this.state = {\n      open: false,\n      openQuantity: false,\n      stock: \"InStock\",\n      quantity: 1,\n      image: \"\",\n      notLoggedIn: false\n    };\n    return _this;\n  }\n\n  _createClass(ProductListItem, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.props.refreshCart();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$props = this.props,\n          product = _this$props.product,\n          token = _this$props.token;\n      console.log(token);\n      var RatingStars = [];\n\n      for (var i = 0; i < product.rating; i++) {\n        RatingStars.push(React.createElement(\"i\", {\n          className: \"fa fa-star\",\n          key: i,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 122\n          },\n          __self: this\n        }));\n      } // if (this.state.notLoggedIn) {\n      //   return (\n      //     <div>\n      //       <ToastContainer />\n      //       <Redirect to=\"/login\" />;\n      //     </div>\n      //   );\n      // }\n\n\n      return (// <div className=\"col-lg-3 col-md-6\">\n        React.createElement(\"div\", {\n          className: \"product-box\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 135\n          },\n          __self: this\n        }, React.createElement(ToastContainer, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 136\n          },\n          __self: this\n        }), React.createElement(\"div\", {\n          className: \"img-wrapper\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 137\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"lable-block\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 138\n          },\n          __self: this\n        }, product.is_available == !true ? React.createElement(\"span\", {\n          className: \"lable3\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 140\n          },\n          __self: this\n        }, \"Out of Stock\") : \"\", product.is_on_sale == true ? React.createElement(\"span\", {\n          className: \"lable4\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 145\n          },\n          __self: this\n        }, \"Sale\") : \"\"), React.createElement(\"div\", {\n          className: \"front\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 150\n          },\n          __self: this\n        }, React.createElement(\"img\", {\n          src: \"https://image.freepik.com/free-photo/river-foggy-mountains-landscape_1204-511.jpg\",\n          className: \"img-fluid lazyload bg-img\",\n          alt: \"\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 154\n          },\n          __self: this\n        })), product.is_available === true ? React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 164\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"addtocart_btn\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 165\n          },\n          __self: this\n        }, React.createElement(\"button\", {\n          className: \"add-button add_cart\",\n          title: \"Add to cart\" // onClick={this.openQuantity}\n          //   onClick={() => this.handleAddToCart2(product.id, product.shop)}\n          ,\n          onClick: function onClick() {\n            return _this2.openQuantity(product.id, product.shop);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 166\n          },\n          __self: this\n        }, \"add to cart\"), React.createElement(\"div\", {\n          className: \"qty-box cart_qty \".concat(this.state.openQuantity ? \"open\" : \"\"),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 175\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"input-group\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 180\n          },\n          __self: this\n        }, React.createElement(\"span\", {\n          className: \"input-group-prepend\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 181\n          },\n          __self: this\n        }, React.createElement(\"button\", {\n          type: \"button\",\n          className: \"btn quantity-left-minus\" // onClick={this.minusQty}\n          ,\n          onClick: function onClick() {\n            return _this2.minusQty2(product.id);\n          },\n          \"data-type\": \"minus\",\n          \"data-field\": \"\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 182\n          },\n          __self: this\n        }, React.createElement(\"i\", {\n          className: \"fa fa-minus\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 190\n          },\n          __self: this\n        }))), React.createElement(\"input\", {\n          type: \"number\",\n          name: \"quantity\",\n          value: this.state.quantity,\n          onChange: this.changeQty,\n          onBlur: this.updateQty,\n          className: \"form-control input-number\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 193\n          },\n          __self: this\n        }), React.createElement(\"span\", {\n          className: \"input-group-prepend\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 201\n          },\n          __self: this\n        }, React.createElement(\"button\", {\n          type: \"button\",\n          className: \"btn quantity-right-plus\" // onClick={this.plusQty}\n          ,\n          onClick: function onClick() {\n            return _this2.plusQty2(product.id, product.shop);\n          },\n          \"data-type\": \"plus\",\n          \"data-field\": \"\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 202\n          },\n          __self: this\n        }, React.createElement(\"i\", {\n          className: \"fa fa-plus\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 210\n          },\n          __self: this\n        }))))))) : null), React.createElement(\"div\", {\n          className: \"product-detail text-center\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 222\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 223\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"rating\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 224\n          },\n          __self: this\n        }, RatingStars), React.createElement(Link, {\n          to: \"\".concat(process.env.PUBLIC_URL, \"/left-sidebar/product/\").concat(product.id),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 225\n          },\n          __self: this\n        }, React.createElement(\"h4\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 228\n          },\n          __self: this\n        }, product.title, \" [\", product.quantity, \"]\")), React.createElement(\"h6\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 232\n          },\n          __self: this\n        }, \"Price: Rs\", product.price, React.createElement(\"del\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 234\n          },\n          __self: this\n        })), React.createElement(\"br\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 238\n          },\n          __self: this\n        })))) // </div>\n\n      );\n    }\n  }]);\n\n  return ProductListItem;\n}(Component);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    token: state.auth.token\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    refreshCart: function refreshCart() {\n      return dispatch(fetchCart());\n    }\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ProductListItem);","map":{"version":3,"sources":["/Users/swalihvpm/Desktop/django-react/LD-gcloud/src/components/ld/shopHome/product-list-item.jsx"],"names":["React","Component","Link","Modal","authAxios","addToCartURL","connect","fetchCart","Redirect","ToastContainer","toast","ProductListItem","props","minusQty","state","quantity","setState","stock","onDecrementClicked","openQuantity","onRemoveFromCart","plusQty","product","onIncrementClicked","refreshCart","changeQty","e","parseInt","target","value","updateQty","onAddToCartClicked","plusQty2","id","shop","console","log","handleAddToCart2","minusQty2","token","loading","post","then","res","catch","err","error","callback","notLoggedIn","open","image","RatingStars","i","rating","push","is_available","is_on_sale","process","env","PUBLIC_URL","title","price","mapStateToProps","auth","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport Modal from \"react-responsive-modal\";\nimport { authAxios } from \"../../../authAxios\";\nimport { addToCartURL } from \"../../../constants\";\nimport { connect } from \"react-redux\";\nimport { fetchCart } from \"../../../actions/cart\";\nimport { Redirect } from \"react-router-dom\";\nimport { ToastContainer, toast } from \"react-toastify\";\nimport \"react-toastify/dist/ReactToastify.css\";\n\nclass ProductListItem extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      open: false,\n      openQuantity: false,\n      stock: \"InStock\",\n      quantity: 1,\n      image: \"\",\n      notLoggedIn: false\n    };\n  }\n\n  componentDidMount() {\n    this.props.refreshCart();\n  }\n\n  minusQty = () => {\n    if (this.state.quantity > 1) {\n      this.setState({ stock: \"InStock\" });\n      this.setState({ quantity: this.state.quantity - 1 });\n      this.props.onDecrementClicked();\n    } else {\n      // console.log(\"removefromcart\");\n      this.setState({ openQuantity: false });\n      this.props.onRemoveFromCart();\n    }\n  };\n\n  plusQty = () => {\n    if (this.props.product.stock >= this.state.quantity) {\n      this.setState({ quantity: this.state.quantity + 1 });\n      this.props.onIncrementClicked();\n      this.props.refreshCart();\n    } else {\n      this.setState({ stock: \"Out of Stock !\" });\n    }\n  };\n  changeQty = e => {\n    this.setState({ quantity: parseInt(e.target.value) });\n  };\n  updateQty = e => {\n    if (this.props.product.stock >= parseInt(e.target.value)) {\n      this.setState({ quantity: parseInt(e.target.value) });\n      this.props.onAddToCartClicked();\n      this.props.refreshCart();\n    } else {\n      this.setState({ stock: \"Out of Stock !\" });\n    }\n  };\n\n  plusQty2 = (id, shop) => {\n    // this.setState({ openQuantity: true });\n    console.log(\"plus qnt\");\n    this.setState({ quantity: this.state.quantity + 1 });\n    this.props.refreshCart();\n    this.handleAddToCart2(id, shop);\n  };\n\n  minusQty2 = id => {\n    if (this.state.quantity > 1) {\n      this.setState({ quantity: this.state.quantity - 1 });\n      this.props.refreshCart();\n    } else {\n      this.setState({ openQuantity: false });\n    }\n\n    console.log(\"minus qnt\");\n\n    // this.handleAddToCart2(id, shop);\n  };\n\n  openQuantity = (id, shop) => {\n    this.props.refreshCart();\n    this.setState({ openQuantity: true });\n    this.handleAddToCart2(id, shop);\n  };\n\n  handleAddToCart2 = (id, shop) => {\n    console.log(this.props.token);\n    if (this.props.token !== null) {\n      this.setState({ loading: true });\n      this.setState({ openQuantity: true });\n      authAxios\n        .post(addToCartURL, { id, shop })\n        .then(res => {\n          this.props.refreshCart();\n          this.setState({ loading: false });\n        })\n        .catch(err => {\n          this.setState({ error: err, loading: false });\n          toast.error(\"Oops there was an error\");\n        });\n    } else {\n      toast.error(\"To add item into your cart, please login\");\n      this.callback();\n    }\n  };\n\n  callback = () => {\n    this.setState({ notLoggedIn: true });\n  };\n\n  render() {\n    const { product, token } = this.props;\n    console.log(token);\n\n    let RatingStars = [];\n    for (var i = 0; i < product.rating; i++) {\n      RatingStars.push(<i className=\"fa fa-star\" key={i}></i>);\n    }\n\n    // if (this.state.notLoggedIn) {\n    //   return (\n    //     <div>\n    //       <ToastContainer />\n    //       <Redirect to=\"/login\" />;\n    //     </div>\n    //   );\n    // }\n    return (\n      // <div className=\"col-lg-3 col-md-6\">\n      <div className=\"product-box\">\n        <ToastContainer />\n        <div className=\"img-wrapper\">\n          <div className=\"lable-block\">\n            {product.is_available == !true ? (\n              <span className=\"lable3\">Out of Stock</span>\n            ) : (\n              \"\"\n            )}\n            {product.is_on_sale == true ? (\n              <span className=\"lable4\">Sale</span>\n            ) : (\n              \"\"\n            )}\n          </div>\n          <div className=\"front\">\n            {/* <Link\n              to={`${process.env.PUBLIC_URL}/left-sidebar/product/${product.id}`}\n            > */}\n            <img\n              src={\n                \"https://image.freepik.com/free-photo/river-foggy-mountains-landscape_1204-511.jpg\"\n              }\n              className=\"img-fluid lazyload bg-img\"\n              alt=\"\"\n            />\n            {/* </Link> */}\n          </div>\n          {product.is_available === true ? (\n            <div>\n              <div className=\"addtocart_btn\">\n                <button\n                  className=\"add-button add_cart\"\n                  title=\"Add to cart\"\n                  // onClick={this.openQuantity}\n                  //   onClick={() => this.handleAddToCart2(product.id, product.shop)}\n                  onClick={() => this.openQuantity(product.id, product.shop)}\n                >\n                  add to cart\n                </button>\n                <div\n                  className={`qty-box cart_qty ${\n                    this.state.openQuantity ? \"open\" : \"\"\n                  }`}\n                >\n                  <div className=\"input-group\">\n                    <span className=\"input-group-prepend\">\n                      <button\n                        type=\"button\"\n                        className=\"btn quantity-left-minus\"\n                        // onClick={this.minusQty}\n                        onClick={() => this.minusQty2(product.id)}\n                        data-type=\"minus\"\n                        data-field=\"\"\n                      >\n                        <i className=\"fa fa-minus\"></i>\n                      </button>\n                    </span>\n                    <input\n                      type=\"number\"\n                      name=\"quantity\"\n                      value={this.state.quantity}\n                      onChange={this.changeQty}\n                      onBlur={this.updateQty}\n                      className=\"form-control input-number\"\n                    />\n                    <span className=\"input-group-prepend\">\n                      <button\n                        type=\"button\"\n                        className=\"btn quantity-right-plus\"\n                        // onClick={this.plusQty}\n                        onClick={() => this.plusQty2(product.id, product.shop)}\n                        data-type=\"plus\"\n                        data-field=\"\"\n                      >\n                        <i className=\"fa fa-plus\"></i>\n                      </button>\n                    </span>\n                  </div>\n                </div>\n              </div>\n            </div>\n          ) : null}\n\n          {/* last  */}\n          {/* {this.state.stock != \"InStock\" ? <span>Out Of Stock</span> : \"\"} */}\n        </div>\n        <div className=\"product-detail text-center\">\n          <div>\n            <div className=\"rating\">{RatingStars}</div>\n            <Link\n              to={`${process.env.PUBLIC_URL}/left-sidebar/product/${product.id}`}\n            >\n              <h4>\n                {product.title} [{product.quantity}]\n              </h4>\n            </Link>\n            <h6>\n              Price: Rs{product.price}\n              <del>\n                {/* <span className=\"money\">{product.discount_price}</span> */}\n              </del>\n            </h6>\n            <br></br>\n          </div>\n        </div>\n      </div>\n      // </div>\n    );\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    token: state.auth.token\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    refreshCart: () => dispatch(fetchCart())\n  };\n};\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(ProductListItem);\n"]},"metadata":{},"sourceType":"module"}