{"ast":null,"code":"import _classCallCheck from \"/Users/swalihvpm/Desktop/django-react/LD-gcloud/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/swalihvpm/Desktop/django-react/LD-gcloud/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/swalihvpm/Desktop/django-react/LD-gcloud/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/swalihvpm/Desktop/django-react/LD-gcloud/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/swalihvpm/Desktop/django-react/LD-gcloud/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/swalihvpm/Desktop/django-react/LD-gcloud/src/components/ld/localityList/search.jsx\";\nimport React, { Component } from \"react\";\nimport axios from \"axios\";\nimport { Link } from \"react-router-dom\"; // import Suggestions from \"./searchSuggestions\";\n\nimport style from \"./searchStyle.css\";\nimport { placeListURL } from \"../../../constants\";\n\nvar Search =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Search, _Component);\n\n  function Search() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Search);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Search)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      error: false,\n      query: \"all\",\n      results: [],\n      offset: 0,\n      limit: 20,\n      display: false\n    };\n\n    _this.getInfo = function () {\n      var _this$state = _this.state,\n          offset = _this$state.offset,\n          limit = _this$state.limit,\n          query = _this$state.query;\n      axios.get(placeListURL + \"?limit=\".concat(limit, \"&offset=\").concat(offset, \"&q=\").concat(query)).then(function (res) {\n        _this.setState({\n          results: res.data.places,\n          loading: false\n        });\n      }).catch(function (err) {\n        _this.setState({\n          error: err,\n          loading: false\n        });\n      });\n    };\n\n    _this.handleInputChange = function () {\n      _this.setState({\n        query: _this.search.value\n      }, function () {\n        if (_this.state.query && _this.state.query.length > 1) {\n          // this.showDropdown()\n          if (_this.state.query.length % 2 === 0) {\n            _this.getInfo();\n          }\n        } else if (!_this.state.query) {// this.hideDropdown()\n        }\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(Search, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$state2 = this.state,\n          results = _this$state2.results,\n          display = _this$state2.display; // console.log(results);\n\n      return React.createElement(\"section\", {\n        className: \"authentication-page section-b-space\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 53\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 54\n        },\n        __self: this\n      }, React.createElement(\"section\", {\n        className: \"search-block\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 55\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 56\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 57\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col-lg-6 offset-lg-3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 58\n        },\n        __self: this\n      }, React.createElement(\"form\", {\n        className: \"form-header\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 59\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"input-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 60\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"text\",\n        className: \"form-control\",\n        \"aria-label\": \"Amount (to the nearest dollar)\",\n        placeholder: \"Search Localities......\",\n        name: \"query\",\n        ref: function ref(input) {\n          return _this2.search = input;\n        },\n        onChange: this.handleInputChange,\n        autoComplete: \"off\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 61\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"input-group-append\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        className: \"btn btn-solid\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"fa fa-search\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73\n        },\n        __self: this\n      }), \"Search\"))), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78\n        },\n        __self: this\n      }, results.map(function (value, i) {\n        return React.createElement(\"div\", {\n          className: \"option\",\n          key: i,\n          tabIndex: \"0\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 81\n          },\n          __self: this\n        }, React.createElement(Link, {\n          to: \"\".concat(process.env.PUBLIC_URL, \"/places/\").concat(value.id),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 82\n          },\n          __self: this\n        }, React.createElement(\"span\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 85\n          },\n          __self: this\n        }, value.name)));\n      })))))))));\n    }\n  }]);\n\n  return Search;\n}(Component);\n\nexport default Search;","map":{"version":3,"sources":["/Users/swalihvpm/Desktop/django-react/LD-gcloud/src/components/ld/localityList/search.jsx"],"names":["React","Component","axios","Link","style","placeListURL","Search","state","error","query","results","offset","limit","display","getInfo","get","then","res","setState","data","places","loading","catch","err","handleInputChange","search","value","length","input","map","i","process","env","PUBLIC_URL","id","name"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport axios from \"axios\";\nimport { Link } from \"react-router-dom\";\n// import Suggestions from \"./searchSuggestions\";\nimport style from \"./searchStyle.css\";\nimport { placeListURL } from \"../../../constants\";\n\nclass Search extends Component {\n  state = {\n    error: false,\n    query: \"all\",\n    results: [],\n    offset: 0,\n    limit: 20,\n    display: false\n  };\n\n  getInfo = () => {\n    const { offset, limit, query } = this.state;\n    axios\n      .get(placeListURL + `?limit=${limit}&offset=${offset}&q=${query}`)\n      .then(res => {\n        this.setState({ results: res.data.places, loading: false });\n      })\n      .catch(err => {\n        this.setState({ error: err, loading: false });\n      });\n  };\n\n  handleInputChange = () => {\n    this.setState(\n      {\n        query: this.search.value\n      },\n      () => {\n        if (this.state.query && this.state.query.length > 1) {\n          // this.showDropdown()\n          if (this.state.query.length % 2 === 0) {\n            this.getInfo();\n          }\n        } else if (!this.state.query) {\n          // this.hideDropdown()\n        }\n      }\n    );\n  };\n\n  render() {\n    const { results, display } = this.state;\n    // console.log(results);\n\n    return (\n      <section className=\"authentication-page section-b-space\">\n        <div className=\"container\">\n          <section className=\"search-block\">\n            <div className=\"container\">\n              <div className=\"row\">\n                <div className=\"col-lg-6 offset-lg-3\">\n                  <form className=\"form-header\">\n                    <div className=\"input-group\">\n                      <input\n                        type=\"text\"\n                        className=\"form-control\"\n                        aria-label=\"Amount (to the nearest dollar)\"\n                        placeholder=\"Search Localities......\"\n                        name=\"query\"\n                        ref={input => (this.search = input)}\n                        onChange={this.handleInputChange}\n                        autoComplete=\"off\"\n                      />\n                      <div className=\"input-group-append\">\n                        <button className=\"btn btn-solid\">\n                          <i className=\"fa fa-search\"></i>Search\n                        </button>\n                      </div>\n                    </div>\n                    {/* {display ? ( */}\n                    <div>\n                      {results.map((value, i) => {\n                        return (\n                          <div className=\"option\" key={i} tabIndex=\"0\">\n                            <Link\n                              to={`${process.env.PUBLIC_URL}/places/${value.id}`}\n                            >\n                              <span>{value.name}</span>\n                            </Link>\n                          </div>\n                        );\n                      })}\n                    </div>\n                    {/* ) : (\n                      \"\"\n                    )} */}\n                  </form>\n                </div>\n              </div>\n            </div>\n          </section>\n        </div>\n      </section>\n    );\n  }\n}\n\nexport default Search;\n"]},"metadata":{},"sourceType":"module"}