(window.webpackJsonp=window.webpackJsonp||[]).push([[37],{561:function(e,t,a){"use strict";a.r(t);var r=a(3),s=a(4),n=a(6),l=a(5),c=a(7),o=a(0),u=a.n(o),d=a(113),i=a(32),m=a(12),h=(a(35),a(13)),p=(a(41),a(209)),f=a(197),E=a(11),S=(a(28),a(193)),b=a(2),v=function(e){function t(){var e,a;Object(r.a)(this,t);for(var s=arguments.length,c=new Array(s),o=0;o<s;o++)c[o]=arguments[o];return(a=Object(n.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(c)))).state={order:[],loading:!1,ShopSuccess:!1,CustomerSuccess:!1,error:null,addressID:null,orderAddress:[],orderItems:[],orderID:null,shippingCharges:25,orderTotal:null,orderStatus:[],shopOrderStatus:[],staffOrderStatus:[],selectedOrderStatus:null},a.fetchOrderStatus=function(){h.a.get(b.R).then(function(e){a.setState({orderStatus:e.data})}).catch(function(e){a.setState({loading:!1})})},a.fetchOrder=function(){var e=a.props.match.params;a.setState({loading:!0}),h.a.get(Object(b.L)(e.orderID)).then(function(e){a.setState({order:e.data,loading:!1,addressID:e.data.address,orderID:e.data.id,orderItems:e.data.order_items,orderTotal:e.data.total}),a.handleCallback()}).catch(function(e){a.setState({error:e,loading:!1})})},a.handleCallback=function(){a.fetchAddress()},a.fetchAddress=function(){var e=a.state.addressID;a.setState({loading:!0}),h.a.get(Object(b.J)(e)).then(function(e){a.setState({orderAddress:e.data,loading:!1})}).catch(function(e){a.setState({error:e,loading:!1})})},a.orderCancelCustoemr=function(e){e.preventDefault();var t=a.state.orderID;console.log(4),h.a.put(Object(b.S)(t),{order_status:4}).then(function(e){E.toast.error("Order  cancelled"),a.setState({CustomerSuccess:!0})}).catch(function(e){a.setState({error:e})})},a.handleChangeOrderStatus=function(e){a.setState({selectedOrderStatus:e.id})},a.updateOrderStatus=function(e){e.preventDefault();var t=a.state.orderID,r=a.state.selectedOrderStatus;h.a.put(Object(b.S)(t),{order_status:r}).then(function(e){E.toast.success("Order status updated"),a.setState({success:!0})}).catch(function(e){a.setState({error:e})})},a}return Object(c.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){var e=this;this.fetchOrder(),this.fetchOrderStatus(),this.filter(),setTimeout(function(){e.filter()},3e3)}},{key:"filter",value:function(){this.props.user.user.is_shop_owner&&this.orderStatusShop(),this.props.user.user.is_staff_user&&this.orderStatusStaff()}},{key:"orderStatusShop",value:function(){this.state.orderStatus;this.setState({shopOrderStatus:this.state.orderStatus.filter(function(e){return"shop"===e.can_update_by})})}},{key:"orderStatusStaff",value:function(){this.state.orderStatus;this.setState({staffOrderStatus:this.state.orderStatus.filter(function(e){return"staff"===e.can_update_by})})}},{key:"render",value:function(){var e=this.state,t=e.order,a=e.orderAddress,r=e.orderItems,s=e.success,n=this.props.user;return s?n.user.is_staff_user?u.a.createElement(f.a,{to:"/manage-order-delivery"}):n.user.is_shop_owner?u.a.createElement(f.a,{to:"/shop-order-table"}):u.a.createElement(f.a,{to:"/orders"}):u.a.createElement("div",null,u.a.createElement(E.ToastContainer,null),u.a.createElement(i.a,{title:"Order Details"}),u.a.createElement("section",{className:"section-b-space"},u.a.createElement("div",{className:"container padding-cls"},u.a.createElement(d.a,{to:"/shop-order-table"},u.a.createElement(S.a,{variant:"outline-danger"},"Back to orders")," "),n.user.is_customer?u.a.createElement("div",{className:"checkout-page"},u.a.createElement("form",{onSubmit:this.updateOrderStatus},u.a.createElement("div",{className:"checkout-form"},u.a.createElement("div",{className:"row check-out"},u.a.createElement("div",{className:"form-group col-md-6 col-sm-6 col-xs-12"},u.a.createElement("br",null),u.a.createElement("div",{className:"field-label"},"Update order status"),u.a.createElement(p.a,{className:"mb-3",onChange:this.handleChangeOrderStatus,getOptionLabel:function(e){return"".concat(e.name)},getOptionValue:function(e){return"".concat(e)},options:this.state.shopOrderStatus,isSearchable:!0,onInputChange:this.handleInputChange,noOptionsMessage:function(){return null},placeholder:"Select order status",menuIsOpen:this.state.menuOpen}))),u.a.createElement("br",null),u.a.createElement("input",{type:"submit",className:"btn btn-solid",id:"submit",placeholder:"Submit",required:""}))),u.a.createElement("br",null)):"",n.user.is_staff_user?u.a.createElement("div",{className:"checkout-page"},u.a.createElement("form",{onSubmit:this.updateOrderStatus},u.a.createElement("div",{className:"checkout-form"},u.a.createElement("div",{className:"row check-out"},u.a.createElement("div",{className:"form-group col-md-6 col-sm-6 col-xs-12"},u.a.createElement("br",null),u.a.createElement("div",{className:"field-label"},"Update order status"),u.a.createElement(p.a,{className:"mb-3",onChange:this.handleChangeOrderStatus,getOptionLabel:function(e){return"".concat(e.name)},getOptionValue:function(e){return"".concat(e)},options:this.state.staffOrderStatus,onInputChange:this.handleInputChange,placeholder:"Select order status",menuIsOpen:this.state.menuOpen}))),u.a.createElement("br",null),u.a.createElement("input",{type:"submit",className:"btn btn-solid",id:"submit",placeholder:"Update",required:""}))),u.a.createElement("br",null)):"",u.a.createElement("div",{className:"row"},u.a.createElement("div",{className:"col-lg-9"},u.a.createElement("div",{className:"dashboard-right"},u.a.createElement("div",{className:"dashboard"},u.a.createElement("div",{className:"box-account box-info"},u.a.createElement("div",{className:"box-head"},u.a.createElement("h3",null,t.shop_name)),u.a.createElement("div",{className:"row"},u.a.createElement("div",{className:"col-sm-6"},u.a.createElement("div",{className:"box"},u.a.createElement("div",{className:"box-title"},u.a.createElement("h4",null,"Order No: ",t.id)),u.a.createElement("h6",null,"Date: ",t.start_date),u.a.createElement("h6",null,"Status: ",t.orderStatus),u.a.createElement("h6",null,"Mod of Payment: ",t.mode_of_payment)),n.user&&u.a.createElement(u.a.Fragment,null,n.user.is_customer?u.a.createElement(S.a,{type:"submit",variant:"outline-danger",size:"sm",onClick:this.orderCancelCustoemr},"Cancel order"):null)))))))),u.a.createElement("div",{className:"row section-t-space"},u.a.createElement("div",{className:"col-lg-6"},u.a.createElement("div",{className:"stripe-section"},u.a.createElement("h5",null,"Address"),u.a.createElement("div",null,u.a.createElement("h5",{className:"checkout_class"},a.PlaceName),u.a.createElement("h6",{className:"checkout_class"},a.areaName),u.a.createElement("table",null,u.a.createElement("tbody",null,u.a.createElement("tr",null,u.a.createElement("td",null,a.full_address)),u.a.createElement("tr",null,u.a.createElement("td",null,a.districtName),u.a.createElement("td",null,a.vilalgeName)),u.a.createElement("tr",null,u.a.createElement("td",null," ",u.a.createElement("a",{href:"tel:"+a.phone_number},a.phone_number))))))))),t?u.a.createElement("div",{className:"row section-t-space"},u.a.createElement("div",{className:"col-lg-6"},u.a.createElement("div",{className:"stripe-section"},u.a.createElement("div",{className:"col-lg-6 col-sm-12 col-xs-12"},u.a.createElement("div",{className:"checkout-details"},u.a.createElement("div",{className:"order-box"},u.a.createElement("div",{className:"title-box"},u.a.createElement("div",null,"Product ",u.a.createElement("span",null," Total"))),u.a.createElement("ul",{className:"qty"},r.map(function(e,t){return u.a.createElement("li",{key:t},e.title," \xd7 ",e.quantity," ",u.a.createElement("span",null,"Rs: ",e.final_price))})),u.a.createElement("ul",{className:"total"},u.a.createElement("li",null,"Total ",u.a.createElement("span",{className:"count"},t.total))))))))):"")))}}]),t}(o.Component);t.default=Object(m.connect)(function(e){return{user:e.user}})(v)}}]);
//# sourceMappingURL=37.4e40faf0.chunk.js.map