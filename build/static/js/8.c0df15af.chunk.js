(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{561:function(e,t,a){"use strict";function n(e,t,a,n,c,r,l){try{var o=e[r](l),s=o.value}catch(i){return void a(i)}o.done?t(s):Promise.resolve(s).then(n,c)}function c(e){return function(){var t=this,a=arguments;return new Promise(function(c,r){var l=e.apply(t,a);function o(e){n(l,c,r,o,s,"next",e)}function s(e){n(l,c,r,o,s,"throw",e)}o(void 0)})}}a.d(t,"a",function(){return c})},583:function(e,t,a){"use strict";a.r(t);var n=a(291),c=a.n(n),r=a(561),l=a(4),o=a(5),s=a(8),i=a(6),m=a(7),u=a(0),h=a.n(u),d=a(16),p=a(65),f=a(13),v=(a(111),a(558)),E=a(9),b=a(10),g=(a(58),a(22)),N=a(204),y=(a(84),a(23)),j=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,o=new Array(n),m=0;m<n;m++)o[m]=arguments[m];return(a=Object(s.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(o)))).state={loading:!1},a.removeFromFavList=function(e){a.setState({loading:!0}),d.a.put(Object(E.e)(e),{is_active:!1}).then(function(e){b.toast.error("This locality removed from your favorite list"),a.props.fetchPlaces(),a.setState({loading:!1})}).catch(function(e){b.toast.error("an error occured"),a.setState({loading:!1})})},a.fetchPlaces=Object(r.a)(c.a.mark(function e(){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a.setState({loading:!0}),d.a.get(E.c).then(function(e){a.setState({localities:e.data,loading:!1})}).catch(function(e){a.setState({error:e,loading:!1})});case 2:case"end":return e.stop()}},e,this)})),a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=this.props.locality;return h.a.createElement("div",{className:"product-box"},this.state.loading&&h.a.createElement("div",{className:"loading-cls"}),h.a.createElement("div",{className:"img-wrapper"},h.a.createElement("div",{className:"front"},h.a.createElement(N.a,{to:"".concat("","/places/").concat(t.place)},h.a.createElement("img",{src:"".concat(E.E).concat(t.place_image),className:"img-fluid",alt:"",loading:"lazy"}))),h.a.createElement("div",{className:"cart-info cart-wrap"},h.a.createElement("button",{title:"Add to cart",onClick:function(){return e.removeFromFavList(t.id)}},h.a.createElement("i",null,h.a.createElement(g.a,{icon:y.j,color:"#ff4c3b"}))))),h.a.createElement("div",{className:"product-detail"},h.a.createElement("div",null,h.a.createElement(N.a,{to:"".concat("","/places/").concat(t.place)},h.a.createElement("h4",null,t.place_name)),h.a.createElement("br",null))))}}]),t}(u.Component),O=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(a=Object(s.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(c)))).state={loading:!1},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=this.props.localities;return h.a.createElement("div",null,h.a.createElement(b.ToastContainer,null),this.state.loading&&h.a.createElement("div",{className:"loading-cls"}),t&&h.a.createElement("section",{className:"ratio_asos metro-section portfolio-section light-layout section-b-space"},h.a.createElement("div",{className:"container"},h.a.createElement("div",{className:"row"},h.a.createElement("div",{className:"col"},h.a.createElement("div",{className:"title4"},h.a.createElement("br",null),h.a.createElement("h3",{className:"title-inner4"}," Favorite Localities"),h.a.createElement("div",{className:"line"},h.a.createElement("span",null)))))),h.a.createElement("div",{className:"container"},h.a.createElement("div",{className:"row"},h.a.createElement("div",{className:"col"},h.a.createElement("div",{className:"no-slider row"},t.map(function(t,a){return h.a.createElement(j,{locality:t,fetchPlaces:e.props.fetchPlaces,key:a})})))))))}}]),t}(u.Component),w=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(a=Object(s.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(c)))).removeFromFavList=function(e){d.a.put(Object(E.f)(e),{is_active:!1}).then(function(e){a.setState({message:"Shop removed from your favorite list"}),b.toast.error("This shop removed from your favorite list"),a.props.fetchShops()}).catch(function(e){a.setState({error:e})})},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=this.props.shop;return h.a.createElement("div",{className:"product-box"},h.a.createElement("div",{className:"img-wrapper"},h.a.createElement("div",{className:"front"},h.a.createElement(N.a,{to:"".concat("","/shops/").concat(t.shop)},h.a.createElement("img",{src:"".concat(E.E).concat(t.shop_image),className:"img-fluid",alt:""}))),h.a.createElement("div",{className:"cart-info cart-wrap"},h.a.createElement("button",{title:"Add to cart",onClick:function(){return e.removeFromFavList(t.id)}},h.a.createElement("i",null,h.a.createElement(g.a,{icon:y.j,color:"#ff4c3b"}))))),h.a.createElement("div",{className:"product-detail"},h.a.createElement("div",null,h.a.createElement(N.a,{to:"".concat("","/shops/").concat(t.shop)},h.a.createElement("h4",null,t.shop_name)),h.a.createElement("br",null),h.a.createElement("h4",null,t.shop_place_name))))}}]),t}(u.Component),S=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(a=Object(s.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(c)))).state={loading:!1},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=this.props.shops;return h.a.createElement("div",null,this.state.loading&&h.a.createElement("div",{className:"loading-cls"}),h.a.createElement("section",{className:"ratio_asos metro-section portfolio-section light-layout section-b-space"},h.a.createElement("div",{className:"container"},h.a.createElement("div",{className:"row"},h.a.createElement("div",{className:"col"},h.a.createElement("div",{className:"title4"},h.a.createElement("br",null),h.a.createElement("h3",{className:"title-inner4"}," Favorite Shops"),h.a.createElement("div",{className:"line"},h.a.createElement("span",null)))))),h.a.createElement("div",{className:"container"},h.a.createElement("div",{className:"row"},h.a.createElement("div",{className:"col"},h.a.createElement("div",{className:"no-slider row"},t.map(function(t,a){return h.a.createElement(w,{shop:t,fetchShops:e.props.fetchShops,key:a})})))))))}}]),t}(u.Component),k=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,o=new Array(n),m=0;m<n;m++)o[m]=arguments[m];return(a=Object(s.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(o)))).state={loading:!1,error:null,localities:[],shops:[]},a.fetchPlaces=Object(r.a)(c.a.mark(function e(){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a.setState({loading:!0}),d.a.get(E.c).then(function(e){a.setState({localities:e.data,loading:!1})}).catch(function(e){a.setState({error:e,loading:!1})});case 2:case"end":return e.stop()}},e,this)})),a.fetchShops=Object(r.a)(c.a.mark(function e(){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a.setState({loading:!0}),d.a.get(E.d).then(function(e){a.setState({shops:e.data,loading:!1})}).catch(function(e){a.setState({error:e,loading:!1})});case 2:case"end":return e.stop()}},e,this)})),a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){document.getElementById("color").setAttribute("href","#"),this.fetchPlaces(),this.fetchShops()}},{key:"render",value:function(){var e=this.state,t=e.localities,a=e.shops;return this.props.token?h.a.createElement("div",null,h.a.createElement(p.Helmet,null,h.a.createElement("title",null,"Local Dukans")),h.a.createElement("div",null,t?h.a.createElement(O,{localities:t,fetchPlaces:this.fetchPlaces}):h.a.createElement("p",null,"No locality in favorite list. Please click on Heart button on any locality to have them added here"," ")),h.a.createElement("div",null,a?h.a.createElement(S,{shops:a,fetchShops:this.fetchShops}):h.a.createElement("p",null,"No shops in favorite list. Please click on Heart button on any locality to have them added here")," ")):h.a.createElement(v.a,{to:"/login"})}}]),t}(u.Component);t.default=Object(f.connect)(function(e){return{token:e.auth.token}})(k)}}]);
//# sourceMappingURL=8.c0df15af.chunk.js.map