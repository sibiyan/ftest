(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{613:function(e,t,a){"use strict";a.r(t);var r=a(6),s=a(7),n=a(10),l=a(8),c=a(9),o=a(0),d=a.n(o),u=a(167),i=a(64),m=a(15),h=a(14),f=a(261),E=a(251),p=a(13),S=(a(43),a(244)),v=a(245),b=a(162),N=a(5),g=function(e){function t(){var e,a;Object(r.a)(this,t);for(var s=arguments.length,c=new Array(s),o=0;o<s;o++)c[o]=arguments[o];return(a=Object(n.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(c)))).state={order:[],loading:!1,ShopSuccess:!1,CustomerSuccess:!1,error:null,addressID:null,orderAddress:[],orderItems:[],orderID:null,shippingCharges:25,orderTotal:null,orderStatus:[],shopOrderStatus:[],staffOrderStatus:[],selectedOrderStatus:null},a.fetchOrderStatus=function(){h.a.get(N.S).then(function(e){a.setState({orderStatus:e.data})}).catch(function(e){a.setState({loading:!1})})},a.fetchOrder=function(){var e=a.props.match.params;a.setState({loading:!0}),h.a.get(Object(N.M)(e.orderID)).then(function(e){a.setState({order:e.data,loading:!1,addressID:e.data.address,orderID:e.data.id,orderItems:e.data.order_items,orderTotal:e.data.total}),a.handleCallback()}).catch(function(e){a.setState({error:e,loading:!1})})},a.handleCallback=function(){a.fetchAddress()},a.fetchAddress=function(){var e=a.state.addressID;a.setState({loading:!0}),h.a.get(Object(N.K)(e)).then(function(e){a.setState({orderAddress:e.data,loading:!1})}).catch(function(e){a.setState({error:e,loading:!1})})},a.orderCancelCustoemr=function(e){e.preventDefault();var t=a.state.orderID;console.log(4),h.a.put(Object(N.T)(t),{order_status:4}).then(function(e){p.toast.error("Order  cancelled"),a.setState({CustomerSuccess:!0})}).catch(function(e){a.setState({error:e})})},a.handleChangeOrderStatus=function(e){a.setState({selectedOrderStatus:e.id})},a.updateOrderStatus=function(e){e.preventDefault();var t=a.state.orderID,r=a.state.selectedOrderStatus;h.a.put(Object(N.T)(t),{order_status:r}).then(function(e){p.toast.success("Order status updated"),a.setState({success:!0})}).catch(function(e){a.setState({error:e})})},a}return Object(c.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){var e=this;this.fetchOrder(),this.fetchOrderStatus(),this.filter(),setTimeout(function(){e.filter()},3e3)}},{key:"filter",value:function(){this.props.user.user.is_shop_owner&&this.orderStatusShop(),this.props.user.user.is_staff_user&&this.orderStatusStaff()}},{key:"orderStatusShop",value:function(){this.state.orderStatus;this.setState({shopOrderStatus:this.state.orderStatus.filter(function(e){return"shop"===e.can_update_by})})}},{key:"orderStatusStaff",value:function(){this.state.orderStatus;this.setState({staffOrderStatus:this.state.orderStatus.filter(function(e){return"staff"===e.can_update_by})})}},{key:"render",value:function(){var e=this.state,t=e.order,a=e.orderAddress,r=e.orderItems,s=e.success,n=this.props.user;return s?n.user.is_staff_user?d.a.createElement(E.a,{to:"/manage-order-delivery"}):n.user.is_shop_owner?d.a.createElement(E.a,{to:"/shop-order-table"}):d.a.createElement(E.a,{to:"/orders"}):d.a.createElement("div",null,d.a.createElement(p.ToastContainer,null),d.a.createElement(i.a,{title:"Order Details"}),d.a.createElement("section",{className:"section-b-space"},d.a.createElement("div",{className:"container padding-cls"},d.a.createElement(u.a,{to:"/shop-order-table"},d.a.createElement(S.a,{variant:"outline-danger"},"Back to orders")," "),n.user.is_staff_user?d.a.createElement("div",{className:"checkout-page"},d.a.createElement("form",{onSubmit:this.updateOrderStatus},d.a.createElement("div",{className:"checkout-form"},d.a.createElement("div",{className:"row check-out"},d.a.createElement("div",{className:"form-group col-md-6 col-sm-6 col-xs-12"},d.a.createElement("br",null),d.a.createElement("div",{className:"field-label"},"Update order status"),d.a.createElement(f.a,{className:"mb-3",onChange:this.handleChangeOrderStatus,getOptionLabel:function(e){return"".concat(e.name)},getOptionValue:function(e){return"".concat(e)},options:this.state.staffOrderStatus,onInputChange:this.handleInputChange,placeholder:"Select order status",menuIsOpen:this.state.menuOpen}))),d.a.createElement("br",null),d.a.createElement("input",{type:"submit",className:"btn btn-solid",id:"submit",placeholder:"Update",required:""}))),d.a.createElement("br",null)):"",d.a.createElement("div",{className:"row"},d.a.createElement("div",{className:"col-lg-9"},d.a.createElement("div",{className:"dashboard-right"},d.a.createElement("div",{className:"dashboard"},d.a.createElement("div",{className:"box-account box-info"},d.a.createElement("div",{className:"box-head"},d.a.createElement("h3",null,t.shop_name)),d.a.createElement("div",{className:"row"},d.a.createElement("div",{className:"col-sm-6"},d.a.createElement("div",{className:"box"},d.a.createElement("div",{className:"box-title"},d.a.createElement("h4",null,"Order No: ",t.id)),d.a.createElement("h6",null,"Date: ",t.start_date),d.a.createElement("h6",null,"Status: ",t.orderStatus),d.a.createElement("h6",null,"Mod of Payment: ",t.mode_of_payment)),n.user&&d.a.createElement(d.a.Fragment,null,n.user.is_customer?d.a.createElement(S.a,{type:"submit",variant:"outline-danger",size:"sm",onClick:this.orderCancelCustoemr},"Cancel order"):null)))))))),d.a.createElement("div",{className:"row section-t-space"},d.a.createElement("div",{className:"col-lg-6"},d.a.createElement("div",{className:"stripe-section"},d.a.createElement("h5",null,"Address"),d.a.createElement("div",null,d.a.createElement("h5",{className:"checkout_class"},a.PlaceName),d.a.createElement("h6",{className:"checkout_class"},a.areaName),d.a.createElement("table",null,d.a.createElement("tbody",null,d.a.createElement("tr",null,d.a.createElement("td",null,a.full_address)),d.a.createElement("tr",null,d.a.createElement("td",null,a.districtName),d.a.createElement("td",null,a.vilalgeName)),d.a.createElement("tr",null,d.a.createElement("td",null," ",d.a.createElement("a",{href:"tel:"+a.phone_number},a.phone_number))))))))),t?d.a.createElement("div",{className:"row section-t-space"},d.a.createElement("div",{className:"col-lg-6"},d.a.createElement("div",{className:"stripe-section"},d.a.createElement("div",{className:"col-lg-6 col-sm-12 col-xs-12"},d.a.createElement("div",{className:"checkout-details"},d.a.createElement("div",{className:"order-box"},d.a.createElement("div",{className:"title-box"},d.a.createElement("div",null,"Product ",d.a.createElement("span",null," Total"))),d.a.createElement("ul",{className:"qty"},r.map(function(e,t){return d.a.createElement(v.a,null,d.a.createElement(b.a,{xs:8}," ",e.itemLocalName?e.itemLocalName:e.itemName," ","[",e.vname,"] \xd7 ",e.quantity," "),d.a.createElement(b.a,{xs:4},"Rs: ",e.final_price))})),d.a.createElement("ul",{className:"total"},d.a.createElement("li",null,"Total ",d.a.createElement("span",{className:"count"},t.total))))))))):"")))}}]),t}(o.Component);t.default=Object(m.connect)(function(e){return{user:e.user}})(g)}}]);
//# sourceMappingURL=34.257ccc73.chunk.js.map