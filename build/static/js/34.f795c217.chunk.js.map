{"version":3,"sources":["components/ld/manageShops/shopDash.jsx"],"names":["Wrapper","styled","div","_templateObject","SectionWrap","_templateObject2","Card","_templateObject3","StyledButton","button","_templateObject4","Orders","_templateObject5","props","_this","Object","_Users_swalihvpm_Desktop_django_react_ftest_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__","this","_Users_swalihvpm_Desktop_django_react_ftest_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__","_Users_swalihvpm_Desktop_django_react_ftest_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__","call","fetchShopDashOrders","setState","loading","authAxios","get","ShopDashOrdersURL","then","res","orders","data","catch","err","error","fetchShopDetails","ShopDashboardDetialURL","ShopDetail","shopOpenStatus","status","id","put","ShopDashOpenStatusURL","is_accepting_orders","refreshpage","console","log","window","location","reload","state","pendingOrders","totalOrders","item","_this2","_this$state","token","react__WEBPACK_IMPORTED_MODULE_6___default","a","createElement","Fragment","name","place","phone_number","react_bootstrap__WEBPACK_IMPORTED_MODULE_11__","variant","onClick","react_router_dom__WEBPACK_IMPORTED_MODULE_8__","to","react_router_dom__WEBPACK_IMPORTED_MODULE_7__","Component","connect","userType","user","auth"],"mappings":"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","file":"static/js/34.f795c217.chunk.js","sourcesContent":["import React, { Component } from \"react\";\nimport { Link, Redirect } from \"react-router-dom\";\nimport Breadcrumb from \"../common/breadcrumb\";\nimport { connect } from \"react-redux\";\nimport { Button, Form, Alert, Row, Col, Container } from \"react-bootstrap\";\nimport styled from \"styled-components\";\nimport {\n  ShopDashboardDetialURL,\n  ShopDashProductsURL,\n  ShopDashOrdersURL,\n  ShopDashOpenStatusURL\n} from \"../../../constants\";\nimport { authAxios } from \"../../../authAxios\";\n\nconst Wrapper = styled.div`\n  margin: 100px auto 20px auto;\n  display: flex;\n  flex-direction: column;\n`;\n\nconst SectionWrap = styled.div`\n  display: flex;\n  justify-content: center;\n  flex-direction: column;\n  margin: 20px 5px 30px 5px;\n  padding: 2px;\n`;\n\nexport const Card = styled.div`\n  display: flex;\n  flex-direction: column;\n  background-color: #fff;\n  color: #333;\n  border-radius: 10px;\n  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.2);\n  padding: 20px;\n  margin: 10px;\n`;\n\nconst StyledButton = styled.button`\n  display: inline-block;\n  padding: 10px 30px;\n  cursor: pointer;\n  background: #ff4c3b;\n  color: #fff;\n  border: none;\n  border-radius: 5px;\n  border: 1px #fff solid;\n  width: 150px;\n`;\n\nconst CheckoutHeadingContainer = styled.div`\n  padding-top: 5px;\n  padding-bottom: 5px;\n  margin-bottom: 15px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n`;\n\nclass Orders extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      ShopDetail: \"\",\n      pendingOrders: \"\",\n      totalOrders: \"\",\n      item: \"\",\n      orders: null,\n      loading: false\n    };\n  }\n\n  componentWillMount() {\n    this.fetchShopDetails();\n    this.fetchShopDashOrders();\n  }\n\n  fetchShopDashOrders = () => {\n    this.setState({ loading: true });\n    authAxios\n      .get(ShopDashOrdersURL)\n      .then(res => {\n        this.setState({ orders: res.data, loading: false });\n        // console.log(res.data.pendingOrders);\n      })\n      .catch(err => {\n        this.setState({ error: err, loading: false });\n      });\n  };\n\n  fetchShopDetails = () => {\n    this.setState({ loading: true });\n    authAxios\n      .get(ShopDashboardDetialURL)\n      .then(res => {\n        this.setState({ ShopDetail: res.data, loading: false });\n      })\n      .catch(err => {\n        this.setState({ error: err, loading: false });\n      });\n  };\n\n  shopOpenStatus = (status, id) => {\n    this.setState({ loading: true });\n    authAxios\n      .put(ShopDashOpenStatusURL(id), {\n        is_accepting_orders: status\n      })\n      .then(res => {\n        // toast.error(\"Order  cancelled\");\n        this.fetchShopDetails();\n        this.setState({ loading: false });\n      })\n      .catch(err => {\n        this.setState({ error: err });\n        this.setState({ loading: false });\n      });\n  };\n\n  refreshpage = () => {\n    console.log(\"hi\");\n    window.location.reload();\n  };\n\n  render() {\n    const { ShopDetail, orders } = this.state;\n    const { token } = this.props;\n    // console.log(token);\n\n    if (!token) {\n      return <Redirect to=\"/login\" />;\n    }\n\n    return (\n      <>\n        <Wrapper>\n          <Card>\n            {/* shop detail  */}\n            {ShopDetail ? (\n              <SectionWrap>\n                <h2>{ShopDetail.name}</h2>\n                <h6>{ShopDetail.place}</h6>\n                <h6>Phone: {ShopDetail.phone_number}</h6>\n                <h4>\n                  {ShopDetail.is_accepting_orders ? (\n                    <Alert variant={\"success\"}>Your shop is open</Alert>\n                  ) : (\n                    <Alert variant={\"danger\"}>Your shop is closed</Alert>\n                  )}\n                </h4>\n                <StyledButton\n                  onClick={() => {\n                    this.shopOpenStatus(\n                      !ShopDetail.is_accepting_orders,\n                      ShopDetail.id\n                    );\n                  }}\n                  variant={\n                    ShopDetail.is_accepting_orders\n                      ? \"outline-danger\"\n                      : \"outline-success\"\n                  }\n                >\n                  {ShopDetail.is_accepting_orders ? \"Close shop\" : \"Open shop\"}\n                </StyledButton>\n              </SectionWrap>\n            ) : null}\n\n            {/* orders  */}\n            {orders ? (\n              <SectionWrap>\n                <h3>{this.state.orders.pendingOrders} Pending Orders</h3>\n                <Link to=\"/shop-order-table\">\n                  <StyledButton>Go to orders</StyledButton>\n                </Link>\n              </SectionWrap>\n            ) : null}\n\n            {/* products  */}\n            {orders ? (\n              <SectionWrap>\n                <h3>{this.state.orders.item} Products in your shop</h3>\n                <Link to=\"/shop-product-list\">\n                  <StyledButton>Go to products</StyledButton>\n                </Link>\n              </SectionWrap>\n            ) : null}\n          </Card>\n        </Wrapper>\n      </>\n    );\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    userType: state.user.user,\n    token: state.auth.token\n  };\n};\n\nexport default connect(mapStateToProps)(Orders);\n\n// export default Orders;\n"],"sourceRoot":""}