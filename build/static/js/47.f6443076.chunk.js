(window.webpackJsonp=window.webpackJsonp||[]).push([[47],{579:function(e,t,a){"use strict";a.r(t);var n=a(156),l=a.n(n),c=a(160),r=a(5),s=a(6),o=a(8),i=a(7),d=a(9),m=a(0),u=a.n(m),h=(a(43),a(10)),p=a(138),E=a(69),f=(a(454),a(33),a(24)),v=a(575),b=a(164),N=a(233),g=a(4),y=a(17),O=a(23),C=a(174),S=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(o.a)(this,Object(i.a)(t).call(this,e))).handleCheckBox=function(e){a.props.handleModeOfPayment(e.target.value)},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.props.options;return u.a.createElement(C.c,{initialValues:{modOfPayment:""}},function(a){return u.a.createElement(C.b,null,u.a.createElement("div",{className:"form-control"},u.a.createElement(C.a,{name:"modOfPayment"},function(a){var n=a.field;return t.map(function(t){return u.a.createElement(u.a.Fragment,{key:t.id},u.a.createElement("div",{className:"row"},u.a.createElement("div",{className:"col-lg-3"},u.a.createElement("div",{className:"box"},u.a.createElement("div",{className:"radio"},u.a.createElement("input",Object.assign({type:"radio",id:t.id},n,{value:t.id,onChange:function(t){e.handleCheckBox(t)}})),u.a.createElement("label",{htmlFor:t.name},t.name))))))})})))})}}]),t}(m.Component),k=function(e){function t(){return Object(r.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.address;return u.a.createElement("div",{className:"row"},u.a.createElement("div",{className:"col-lg-9"},u.a.createElement("div",{className:"dashboard-right"},u.a.createElement("div",{className:"dashboard"},u.a.createElement("div",{className:"box-account box-info"},u.a.createElement("div",{className:"box-head"},u.a.createElement("h2",null,e.PlaceName)),u.a.createElement("div",{className:"row"},u.a.createElement("div",{className:"col-sm-6"},u.a.createElement("div",{className:"box"},u.a.createElement("div",{className:"box-title"},u.a.createElement("h3",null,e.areaName)),u.a.createElement("div",{className:"box-content"},u.a.createElement("h6",null,e.full_address),u.a.createElement("h6",null,"Village: ",e.vilalgeName),u.a.createElement("h6",null,"District: ",e.districtName),u.a.createElement("h6",null,"Sate: ",e.stateName),u.a.createElement("h6",null,"Phone: ",e.phone_number),u.a.createElement("br",null),u.a.createElement("a",{href:"".concat("","/editaddress/").concat(e.id)},"Edit"))))))))))}}]),t}(m.Component),w=function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,s=new Array(n),d=0;d<n;d++)s[d]=arguments[d];return(a=Object(o.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(s)))).state={loading:!1,shipping:25,addressList:[],cart:null,selectedAddress:null,shop_id:null,ShopModeOfPayment:[],selectedModeofPayment:null,coupon:"",Coupondisplay:!1,offer:"",error:""},a.handleDisplyCoupon=function(){a.setState({Coupondisplay:!a.state.Coupondisplay})},a.handleFetchOrder=function(){a.setState({loading:!0}),y.a.get(g.T).then(function(e){a.setState({cart:e.data,loading:!1}),a.setState({shop_id:e.data.shop_id},function(){a.fetchModeOfPayment()})}).catch(function(e){a.setState({error:e})})},a.fetchModeOfPayment=function(){var e=a.state.shop_id;void 0!==e&&(a.setState({loading:!0}),y.a.get(g.l,{params:{shopID:e}}).then(function(e){a.setState({ShopModeOfPayment:e.data,loading:!1})}).catch(function(e){a.setState({error:e,loading:!1})}))},a.handleFetchAddresses=Object(c.a)(l.a.mark(function e(){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a.setState({loading:!0}),y.a.get(g.x).then(function(e){a.setState({addressList:e.data,loading:!1})}).catch(function(e){a.setState({error:e,loading:!1})});case 2:case"end":return e.stop()}},e,this)})),a.handleCouponChange=function(e){a.setState({coupon:e.target.value})},a.handleCouponSubmit=function(){var e=Object(c.a)(l.a.mark(function e(t){var n;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),""!==(n=a.state.coupon)?(a.setState({loading:!0}),y.a.post(g.t,{code:n}).then(function(e){a.setState({offer:e.data,loading:!1}),f.toast.success("Coupon applied succesfully")}).catch(function(e){a.setState({error:e,loading:!1})})):f.toast.error("Coupon not entered");case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a.handleAddress=function(e){a.setState({selectedAddress:e.target.value}),console.log(e.target.value)},a.handleModeOfPayment=function(e){a.setState({selectedModeofPayment:e})},a.submit=function(e){e.preventDefault(),a.state.addressList;var t=a.state.addressList[0].id;a.setState({loading:!0});var n=a.state,l=n.selectedModeofPayment,c=n.addressList;null!==l&&c.length>0?y.a.post(g.C,{selectedAddress:t,selectedModeofPayment:l}).then(function(e){a.setState({loading:!1,success:!0}),f.toast.success("Order placed succesfully"),a.redirectToOrders(),a.props.refreshCart()}).catch(function(e){a.setState({loading:!1,error:e},function(){f.toast.success("There was an error")})}):f.toast.error("Please select mode of payment and create an address")},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.handleFetchAddresses(),this.handleFetchOrder()}},{key:"redirectToOrders",value:function(){this.props.clearKart(),setTimeout(this.props.history.push("/orders"),1e4)}},{key:"render",value:function(){var e=this,t=this.props.isAuthenticated,a=this.state,n=a.addressList,l=(a.selectedAddress,a.cart),c=a.ShopModeOfPayment,r=(a.shop_id,a.offer),s=a.error;return t?u.a.createElement("div",null,u.a.createElement(f.ToastContainer,null),this.state.loading&&u.a.createElement("div",{className:"loading-cls"}),l?u.a.createElement("div",{className:"container padding-cls"},u.a.createElement("div",{className:"checkout-page"},u.a.createElement("div",{className:"checkout-form"},u.a.createElement("section",{className:"section-b-space"},u.a.createElement("div",{className:"container"},u.a.createElement(v.a,{bg:"dark"},u.a.createElement("h4",{style:{color:"white"}},"Shop details")),u.a.createElement("div",{className:"row"},u.a.createElement("div",{className:"col-lg-9"},u.a.createElement("div",{className:"dashboard-right"},u.a.createElement("div",{className:"dashboard"},u.a.createElement("div",{className:"box-account box-info"},u.a.createElement("div",{className:"row"},u.a.createElement("div",{className:"col-sm-6"},u.a.createElement("div",{className:"box"},u.a.createElement("h3",null,l.shop_name),u.a.createElement("h6",null,l.place_name)),u.a.createElement("br",null),u.a.createElement("h4",null,l.shipping_message)))))))))),u.a.createElement("div",{className:"col-lg-6 col-sm-8 col-xs-12"},u.a.createElement(v.a,{bg:"dark"},u.a.createElement("h4",{style:{color:"white"}},"Product details")),u.a.createElement("div",{className:"checkout-details"},u.a.createElement("div",{className:"order-box"},u.a.createElement("div",{className:"title-box"},u.a.createElement("div",null,"Product ",u.a.createElement("span",null," Total"))),u.a.createElement("ul",{className:"qty"},l.order_items.map(function(e,t){return u.a.createElement("li",{key:t},e.itemLocalName?u.a.createElement(u.a.Fragment,null,e.itemLocalName," [",e.vname,"] "," x "," ",e.quantity):u.a.createElement(u.a.Fragment,null,e.itemName," [",e.vname,"] "," x "," ",e.quantity),u.a.createElement("span",null,e.final_price))})),u.a.createElement("ul",{className:"sub-total"},u.a.createElement("li",null,"Total"," ",u.a.createElement("span",{className:"count"},l.total)))),u.a.createElement(E.a,{style:{color:"#FFF"},to:"/order-summary"},u.a.createElement("button",{type:"button",className:"btn btn-secondary"},"Edit Order"))))),n.length>0?u.a.createElement("section",{className:"section-b-space"},u.a.createElement("div",{className:"container"},u.a.createElement(v.a,{bg:"dark"},u.a.createElement("h4",{style:{color:"white"}},"Delivery Address")),u.a.createElement(k,{address:n[0]}))):u.a.createElement("section",{className:"section-b-space"},u.a.createElement("div",{className:"container"},u.a.createElement("div",{className:"account-sidebar"},u.a.createElement(E.a,{style:{color:"#FFF"},to:"/create-address"},"Add Address")))),c?u.a.createElement("section",{className:"section-b-space"},u.a.createElement("div",{className:"container"},u.a.createElement(v.a,{bg:"dark"},u.a.createElement("h4",{style:{color:"white"}},"Select Payment Method")),u.a.createElement(S,{handleModeOfPayment:this.handleModeOfPayment,options:c}))):null,u.a.createElement("section",{className:"section-b-space"},u.a.createElement("div",{className:"container"},u.a.createElement(N.a,{onClick:function(){e.handleDisplyCoupon()},variant:"success"},"Have a coupon ?"),u.a.createElement("div",{className:"row",style:{display:this.state.Coupondisplay?"":"none"}},u.a.createElement("div",{className:"col-lg-6"},u.a.createElement("div",{className:"theme-card"},u.a.createElement("form",{className:"theme-form"},u.a.createElement("div",{className:"form-group"},u.a.createElement(v.a,{bg:"dark"},u.a.createElement("h4",{style:{color:"white"}},"Enter Coupon code")),u.a.createElement("br",null),u.a.createElement("input",{onChange:this.handleCouponChange.bind(this),type:"text",className:"form-control",id:"coupon",value:this.state.coupon,name:"coupon",required:""})),u.a.createElement("div",null,r?u.a.createElement(N.a,{variant:"success"},"Offer Applied !!",r.message):null),u.a.createElement("div",null,s?u.a.createElement(N.a,{variant:"danger"}," ","This coupon is not valid"):null),u.a.createElement(b.a,{type:"submit",onClick:this.handleCouponSubmit.bind(this),variant:"flat",size:"xxl",style:{color:"red"}},"Apply coupon"))))),u.a.createElement("br",null),u.a.createElement("button",{type:"button",className:"btn-solid btn",onClick:this.submit},"Place Order")),u.a.createElement("br",null)," ",u.a.createElement("br",null)))):u.a.createElement("p",null,"You dont have an active order")):u.a.createElement(p.a,{to:"/login"})}}]),t}(m.Component);t.default=Object(h.connect)(function(e){return{isAuthenticated:e.auth.token,cart:e.cart.shoppingCart}},function(e){return{refreshCart:function(){return e(Object(O.b)())},clearKart:function(){return e(O.a)}}})(w)}}]);
//# sourceMappingURL=47.f6443076.chunk.js.map