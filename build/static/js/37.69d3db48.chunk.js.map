{"version":3,"sources":["components/ld/manageShops/shopDash.jsx"],"names":["Orders","props","_this","Object","_Users_swalihvpm_Desktop_django_react_ftest_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__","this","_Users_swalihvpm_Desktop_django_react_ftest_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__","_Users_swalihvpm_Desktop_django_react_ftest_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__","call","fetchShopDashOrders","setState","loading","authAxios","get","ShopDashOrdersURL","then","res","orders","data","catch","err","error","fetchShopDetails","ShopDashboardDetialURL","ShopDetail","shopOpenStatus","status","id","put","ShopDashOpenStatusURL","is_accepting_orders","state","pendingOrders","totalOrders","item","_this2","_this$state","token","react__WEBPACK_IMPORTED_MODULE_5___default","a","createElement","_common_breadcrumb__WEBPACK_IMPORTED_MODULE_8__","title","className","Fragment","name","place","phone_number","react_bootstrap__WEBPACK_IMPORTED_MODULE_10__","variant","react_bootstrap__WEBPACK_IMPORTED_MODULE_11__","onClick","react_router_dom__WEBPACK_IMPORTED_MODULE_7__","to","react_router_dom__WEBPACK_IMPORTED_MODULE_6__","Component","connect","userType","user","auth"],"mappings":"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","file":"static/js/37.69d3db48.chunk.js","sourcesContent":["import React, { Component } from \"react\";\nimport { Link, Redirect } from \"react-router-dom\";\nimport Breadcrumb from \"../common/breadcrumb\";\nimport { connect } from \"react-redux\";\nimport { Button, Form, Alert } from \"react-bootstrap\";\n\nimport {\n  ShopDashboardDetialURL,\n  ShopDashProductsURL,\n  ShopDashOrdersURL,\n  ShopDashOpenStatusURL\n} from \"../../../constants\";\nimport { authAxios } from \"../../../authAxios\";\n\nclass Orders extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      ShopDetail: \"\",\n      pendingOrders: \"\",\n      totalOrders: \"\",\n      item: \"\",\n      orders: null,\n      loading: false\n    };\n  }\n\n  componentWillMount() {\n    this.fetchShopDetails();\n    this.fetchShopDashOrders();\n  }\n\n  fetchShopDashOrders = () => {\n    this.setState({ loading: true });\n    authAxios\n      .get(ShopDashOrdersURL)\n      .then(res => {\n        this.setState({ orders: res.data, loading: false });\n        // console.log(res.data.pendingOrders);\n      })\n      .catch(err => {\n        this.setState({ error: err, loading: false });\n      });\n  };\n\n  fetchShopDetails = () => {\n    this.setState({ loading: true });\n    authAxios\n      .get(ShopDashboardDetialURL)\n      .then(res => {\n        this.setState({ ShopDetail: res.data, loading: false });\n      })\n      .catch(err => {\n        this.setState({ error: err, loading: false });\n      });\n  };\n\n  shopOpenStatus = (status, id) => {\n    this.setState({ loading: true });\n    authAxios\n      .put(ShopDashOpenStatusURL(id), {\n        is_accepting_orders: status\n      })\n      .then(res => {\n        // toast.error(\"Order  cancelled\");\n        this.fetchShopDetails();\n        this.setState({ loading: false });\n      })\n      .catch(err => {\n        this.setState({ error: err });\n        this.setState({ loading: false });\n      });\n  };\n\n  render() {\n    const { ShopDetail, orders } = this.state;\n    const { token } = this.props;\n    // console.log(token);\n\n    if (!token) {\n      return <Redirect to=\"/login\" />;\n    }\n\n    return (\n      <div>\n        <Breadcrumb title={\"Shop Details\"} />\n        {this.state.loading ? (\n          <div className=\"loading-cls\"></div>\n        ) : (\n          <React.Fragment>\n            <div>\n              <section className=\"section-b-space\">\n                <div className=\"container\">\n                  {/* <div className=\"account-sidebar\"></div> */}\n                  <div className=\"row\">\n                    <div className=\"col-lg-9\">\n                      <div className=\"dashboard-right\">\n                        <div className=\"dashboard\">\n                          <div className=\"box-account box-info\">\n                            <div className=\"box-head\">\n                              <h3>{ShopDetail.name}</h3>\n                            </div>\n                            <div className=\"row\">\n                              <div className=\"col-sm-6\">\n                                <div className=\"box\">\n                                  <div className=\"box-title\">\n                                    {/* <h4>Order ID: {order.id}</h4> */}\n                                  </div>\n                                  <div className=\"box-content\">\n                                    <h6>{ShopDetail.place}</h6>\n                                    <h6>Phone: {ShopDetail.phone_number}</h6>\n                                    <br />\n                                    <h4>\n                                      {ShopDetail.is_accepting_orders ? (\n                                        <Alert variant={\"success\"}>\n                                          Your shop is open\n                                        </Alert>\n                                      ) : (\n                                        <Alert variant={\"danger\"}>\n                                          Your shop is closed\n                                        </Alert>\n                                      )}\n                                    </h4>\n                                    <br></br>\n                                    <>\n                                      <Button\n                                        onClick={() => {\n                                          this.shopOpenStatus(\n                                            !ShopDetail.is_accepting_orders,\n                                            ShopDetail.id\n                                          );\n                                        }}\n                                        variant={\n                                          ShopDetail.is_accepting_orders\n                                            ? \"outline-danger\"\n                                            : \"outline-success\"\n                                        }\n                                      >\n                                        {ShopDetail.is_accepting_orders\n                                          ? \"Close shop\"\n                                          : \"Open shop\"}\n                                      </Button>\n                                    </>\n                                  </div>\n                                </div>\n                              </div>\n                            </div>\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                  {orders ? (\n                    <div className=\"row\">\n                      <div className=\"col-lg-9\">\n                        <div className=\"dashboard-right\">\n                          <div className=\"dashboard\">\n                            <div className=\"box-account box-info\">\n                              <div className=\"box-head\">\n                                <h3>\n                                  {this.state.orders.pendingOrders} Pending\n                                  Orders\n                                </h3>\n                              </div>\n                              <div className=\"row\">\n                                <div className=\"col-sm-6\">\n                                  <div className=\"box\">\n                                    <div className=\"box-title\"></div>\n                                    <div className=\"box-content\">\n                                      <Link to=\"/shop-order-table\">\n                                        <Button variant=\"outline-primary\">\n                                          Go to orders\n                                        </Button>\n                                      </Link>\n                                    </div>\n                                  </div>\n                                </div>\n                              </div>\n                            </div>\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                  ) : null}\n\n                  {orders ? (\n                    <div className=\"row\">\n                      <div className=\"col-lg-9\">\n                        <div className=\"dashboard-right\">\n                          <div className=\"dashboard\">\n                            <div className=\"box-account box-info\">\n                              <div className=\"box-head\">\n                                <h3>\n                                  {this.state.orders.item} Products in your shop\n                                </h3>\n                              </div>\n                              <div className=\"row\">\n                                <div className=\"col-sm-6\">\n                                  <div className=\"box\">\n                                    <div className=\"box-title\">\n                                      {/* <h4>Order ID: {order.id}</h4> */}\n                                    </div>\n                                    <div className=\"box-content\">\n                                      {/* <a href=\"/shop-product-list\"> */}{\" \"}\n                                      <Link to=\"/shop-product-list\">\n                                        <Button variant=\"outline-primary\">\n                                          Go to products\n                                        </Button>{\" \"}\n                                      </Link>\n                                      {/* </a> */}\n                                    </div>\n                                  </div>\n                                </div>\n                              </div>\n                            </div>\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                  ) : null}\n                  {orders ? (\n                    <div className=\"row\">\n                      <div className=\"col-lg-9\">\n                        <div className=\"dashboard-right\">\n                          <div className=\"dashboard\">\n                            <div className=\"box-account box-info\">\n                              <div className=\"box-head\">\n                                <h3>\n                                  {this.state.orders.totalOrders} Total Orders\n                                </h3>\n                              </div>\n                              <div className=\"row\">\n                                <div className=\"col-sm-6\">\n                                  <div className=\"box\">\n                                    <div className=\"box-title\"></div>\n                                  </div>\n                                </div>\n                              </div>\n                            </div>\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                  ) : null}\n                </div>\n              </section>\n            </div>\n          </React.Fragment>\n        )}\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    userType: state.user.user,\n    token: state.auth.token\n  };\n};\n\nexport default connect(mapStateToProps)(Orders);\n\n// export default Orders;\n"],"sourceRoot":""}