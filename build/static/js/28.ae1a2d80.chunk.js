(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{140:function(e,t,a){"use strict";function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}a.d(t,"a",function(){return r})},141:function(e,t,a){"use strict";function r(e,t){if(null==e)return{};var a,r,n={},s=Object.keys(e);for(r=0;r<s.length;r++)a=s[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}a.d(t,"a",function(){return r})},142:function(e,t,a){"use strict";a.d(t,"a",function(){return l});a(140);var r=a(0),n=a.n(r),s=n.a.createContext({});s.Consumer,s.Provider;function l(e,t){var a=Object(r.useContext)(s);return e||a[t]||t}},149:function(e,t,a){"use strict";var r=a(140),n=a(141),s=a(0),l=a.n(s),c=a(151);function o(e){return!e||"#"===e.trim()}var u=l.a.forwardRef(function(e,t){var a=e.as,s=void 0===a?"a":a,u=e.disabled,i=e.onKeyDown,d=Object(n.a)(e,["as","disabled","onKeyDown"]),m=function(e){var t=d.href,a=d.onClick;(u||o(t))&&e.preventDefault(),u?e.stopPropagation():a&&a(e)};return o(d.href)&&(d.role=d.role||"button",d.href=d.href||"#"),u&&(d.tabIndex=-1,d["aria-disabled"]=!0),l.a.createElement(s,Object(r.a)({ref:t},d,{onClick:m,onKeyDown:Object(c.a)(function(e){" "===e.key&&(e.preventDefault(),m(e))},i)}))});u.displayName="SafeAnchor",t.a=u},151:function(e,t,a){"use strict";t.a=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.filter(function(e){return null!=e}).reduce(function(e,t){if("function"!==typeof t)throw new Error("Invalid Argument Type, must only provide functions, undefined, or null.");return null===e?t:function(){for(var a=arguments.length,r=new Array(a),n=0;n<a;n++)r[n]=arguments[n];e.apply(this,r),t.apply(this,r)}},null)}},164:function(e,t,a){"use strict";var r=a(140),n=a(141),s=a(32),l=a.n(s),c=a(0),o=a.n(c),u=a(142),i=a(149),d=o.a.forwardRef(function(e,t){var a=e.bsPrefix,s=e.variant,c=e.size,d=e.active,m=e.className,f=e.block,h=e.type,p=e.as,E=Object(n.a)(e,["bsPrefix","variant","size","active","className","block","type","as"]),b=Object(u.a)(a,"btn"),v=l()(m,b,d&&"active",b+"-"+s,f&&b+"-block",c&&b+"-"+c);if(E.href)return o.a.createElement(i.a,Object(r.a)({},E,{as:p,ref:t,className:l()(v,E.disabled&&"disabled")}));t&&(E.ref=t),h?E.type=h:p||(E.type="button");var S=p||"button";return o.a.createElement(S,Object(r.a)({},E,{className:v}))});d.displayName="Button",d.defaultProps={variant:"primary",active:!1,disabled:!1},t.a=d},566:function(e,t,a){"use strict";a.r(t);var r=a(5),n=a(6),s=a(8),l=a(7),c=a(9),o=a(0),u=a.n(o),i=a(69),d=a(70),m=a(10),f=(a(25),a(17)),h=(a(35),a(156)),p=a(138),E=a(24),b=(a(33),a(164)),v=a(4),S=function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return(a=Object(s.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(c)))).state={order:[],loading:!1,ShopSuccess:!1,CustomerSuccess:!1,error:null,addressID:null,orderAddress:[],orderItems:[],orderID:null,shippingCharges:25,orderTotal:null,orderStatus:[],shopOrderStatus:[],staffOrderStatus:[],selectedOrderStatus:null},a.fetchOrderStatus=function(){f.a.get(v.R).then(function(e){a.setState({orderStatus:e.data})}).catch(function(e){a.setState({loading:!1})})},a.fetchOrder=function(){var e=a.props.match.params;a.setState({loading:!0}),f.a.get(Object(v.L)(e.orderID)).then(function(e){a.setState({order:e.data,loading:!1,addressID:e.data.address,orderID:e.data.id,orderItems:e.data.order_items,orderTotal:e.data.total}),a.handleCallback()}).catch(function(e){a.setState({error:e,loading:!1})})},a.handleCallback=function(){a.fetchAddress()},a.fetchAddress=function(){var e=a.state.addressID;a.setState({loading:!0}),f.a.get(Object(v.J)(e)).then(function(e){a.setState({orderAddress:e.data,loading:!1})}).catch(function(e){a.setState({error:e,loading:!1})})},a.orderCancelCustoemr=function(e){e.preventDefault();var t=a.state.orderID;console.log(4),f.a.put(Object(v.S)(t),{order_status:4}).then(function(e){E.toast.error("Order  cancelled"),a.setState({CustomerSuccess:!0})}).catch(function(e){a.setState({error:e})})},a.handleChangeOrderStatus=function(e){a.setState({selectedOrderStatus:e.id})},a.updateOrderStatus=function(e){e.preventDefault();var t=a.state.orderID,r=a.state.selectedOrderStatus;f.a.put(Object(v.S)(t),{order_status:r}).then(function(e){E.toast.success("Order status updated"),a.setState({success:!0})}).catch(function(e){a.setState({error:e})})},a}return Object(c.a)(t,e),Object(n.a)(t,[{key:"componentWillMount",value:function(){var e=this;this.fetchOrder(),this.fetchOrderStatus(),this.filter(),setTimeout(function(){e.filter()},3e3)}},{key:"filter",value:function(){this.props.user.user.is_shop_owner&&this.orderStatusShop(),this.props.user.user.is_staff_user&&this.orderStatusStaff()}},{key:"orderStatusShop",value:function(){this.state.orderStatus;this.setState({shopOrderStatus:this.state.orderStatus.filter(function(e){return"shop"===e.can_update_by})})}},{key:"orderStatusStaff",value:function(){this.state.orderStatus;this.setState({staffOrderStatus:this.state.orderStatus.filter(function(e){return"staff"===e.can_update_by})})}},{key:"render",value:function(){var e=this.state,t=e.order,a=e.orderAddress,r=e.orderItems,n=e.success,s=this.props.user;return n?s.user.is_staff_user?u.a.createElement(p.a,{to:"/manage-order-delivery"}):s.user.is_shop_owner?u.a.createElement(p.a,{to:"/shop-order-table"}):u.a.createElement(p.a,{to:"/orders"}):u.a.createElement("div",null,u.a.createElement(E.ToastContainer,null),u.a.createElement(d.a,{title:"Order Details"}),u.a.createElement("section",{className:"section-b-space"},u.a.createElement("div",{className:"container padding-cls"},u.a.createElement(i.a,{to:"/shop-order-table"},u.a.createElement(b.a,{variant:"outline-danger"},"Back to orders")," "),s.user.is_customer?u.a.createElement("div",{className:"checkout-page"},u.a.createElement("form",{onSubmit:this.updateOrderStatus},u.a.createElement("div",{className:"checkout-form"},u.a.createElement("div",{className:"row check-out"},u.a.createElement("div",{className:"form-group col-md-6 col-sm-6 col-xs-12"},u.a.createElement("br",null),u.a.createElement("div",{className:"field-label"},"Update order status"),u.a.createElement(h.a,{className:"mb-3",onChange:this.handleChangeOrderStatus,getOptionLabel:function(e){return"".concat(e.name)},getOptionValue:function(e){return"".concat(e)},options:this.state.shopOrderStatus,isSearchable:!0,onInputChange:this.handleInputChange,noOptionsMessage:function(){return null},placeholder:"Select order status",menuIsOpen:this.state.menuOpen}))),u.a.createElement("br",null),u.a.createElement("input",{type:"submit",className:"btn btn-solid",id:"submit",placeholder:"Submit",required:""}))),u.a.createElement("br",null)):"",s.user.is_staff_user?u.a.createElement("div",{className:"checkout-page"},u.a.createElement("form",{onSubmit:this.updateOrderStatus},u.a.createElement("div",{className:"checkout-form"},u.a.createElement("div",{className:"row check-out"},u.a.createElement("div",{className:"form-group col-md-6 col-sm-6 col-xs-12"},u.a.createElement("br",null),u.a.createElement("div",{className:"field-label"},"Update order status"),u.a.createElement(h.a,{className:"mb-3",onChange:this.handleChangeOrderStatus,getOptionLabel:function(e){return"".concat(e.name)},getOptionValue:function(e){return"".concat(e)},options:this.state.staffOrderStatus,onInputChange:this.handleInputChange,placeholder:"Select order status",menuIsOpen:this.state.menuOpen}))),u.a.createElement("br",null),u.a.createElement("input",{type:"submit",className:"btn btn-solid",id:"submit",placeholder:"Update",required:""}))),u.a.createElement("br",null)):"",u.a.createElement("div",{className:"row"},u.a.createElement("div",{className:"col-lg-9"},u.a.createElement("div",{className:"dashboard-right"},u.a.createElement("div",{className:"dashboard"},u.a.createElement("div",{className:"box-account box-info"},u.a.createElement("div",{className:"box-head"},u.a.createElement("h3",null,t.shop_name)),u.a.createElement("div",{className:"row"},u.a.createElement("div",{className:"col-sm-6"},u.a.createElement("div",{className:"box"},u.a.createElement("div",{className:"box-title"},u.a.createElement("h4",null,"Order No: ",t.id)),u.a.createElement("h6",null,"Date: ",t.start_date),u.a.createElement("h6",null,"Status: ",t.orderStatus),u.a.createElement("h6",null,"Mod of Payment: ",t.mode_of_payment)),s.user&&u.a.createElement(u.a.Fragment,null,s.user.is_customer?u.a.createElement(b.a,{type:"submit",variant:"outline-danger",size:"sm",onClick:this.orderCancelCustoemr},"Cancel order"):null)))))))),u.a.createElement("div",{className:"row section-t-space"},u.a.createElement("div",{className:"col-lg-6"},u.a.createElement("div",{className:"stripe-section"},u.a.createElement("h5",null,"Address"),u.a.createElement("div",null,u.a.createElement("h5",{className:"checkout_class"},a.PlaceName),u.a.createElement("h6",{className:"checkout_class"},a.areaName),u.a.createElement("table",null,u.a.createElement("tbody",null,u.a.createElement("tr",null,u.a.createElement("td",null,a.full_address)),u.a.createElement("tr",null,u.a.createElement("td",null,a.districtName),u.a.createElement("td",null,a.vilalgeName)),u.a.createElement("tr",null,u.a.createElement("td",null," ",u.a.createElement("a",{href:"tel:"+a.phone_number},a.phone_number))))))))),t?u.a.createElement("div",{className:"row section-t-space"},u.a.createElement("div",{className:"col-lg-6"},u.a.createElement("div",{className:"stripe-section"},u.a.createElement("div",{className:"col-lg-6 col-sm-12 col-xs-12"},u.a.createElement("div",{className:"checkout-details"},u.a.createElement("div",{className:"order-box"},u.a.createElement("div",{className:"title-box"},u.a.createElement("div",null,"Product ",u.a.createElement("span",null," Total"))),u.a.createElement("ul",{className:"qty"},r.map(function(e,t){return u.a.createElement("li",{key:t},e.title," \xd7 ",e.quantity," ",u.a.createElement("span",null,"Rs: ",e.final_price))})),u.a.createElement("ul",{className:"total"},u.a.createElement("li",null,"Total ",u.a.createElement("span",{className:"count"},t.total))))))))):"")))}}]),t}(o.Component);t.default=Object(m.connect)(function(e){return{user:e.user}})(S)}}]);
//# sourceMappingURL=28.ae1a2d80.chunk.js.map