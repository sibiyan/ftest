{"version":3,"sources":["components/ld/products/addProduct.jsx"],"names":["AddProduct","state","title","title_local","stock_count","product_image","productategory","is_available","is_on_sale","is_featured","item_stock","id","success","error","loading","categoryID","productImages","selectedImage","shopID","ShopProductCategory","handleChange","e","_this","setState","Object","_Users_swalihvpm_Desktop_django_react_ftest_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__","target","name","value","handleChangeCategory","cat","fetchProductImage","handleChangeImage","image","image1","handleChangeCheckBox","checked","fetchProductCategory","ownerID","props","user","axios","get","ShopProductCategoryURL","then","res","data","catch","err","productImagesURL","handleCreateItem","preventDefault","userID","_this$state","authAxios","post","addProductURL","saving","this","_this$state2","react__WEBPACK_IMPORTED_MODULE_6___default","a","createElement","react_router_dom__WEBPACK_IMPORTED_MODULE_8__","to","token","react_bootstrap__WEBPACK_IMPORTED_MODULE_17__","className","react_bootstrap__WEBPACK_IMPORTED_MODULE_18__","onSubmit","Group","controlId","Label","Control","type","onChange","react_select__WEBPACK_IMPORTED_MODULE_14__","getOptionLabel","option","concat","getOptionValue","options","isSearchable","placeholder","noOptionsMessage","react_bootstrap__WEBPACK_IMPORTED_MODULE_19__","xs","md","react_bootstrap_Image__WEBPACK_IMPORTED_MODULE_11__","src","fluid","Check","label","react_bootstrap__WEBPACK_IMPORTED_MODULE_20__","variant","Component","connect","auth"],"mappings":"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","file":"static/js/37.15705e1b.chunk.js","sourcesContent":["import React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport { Redirect } from \"react-router-dom\";\nimport Breadcrumb from \"../common/breadcrumb\";\nimport axios from \"axios\";\nimport Image from \"react-bootstrap/Image\";\n\nimport {\n  productImagesURL,\n  ShopProductCategoryURL,\n  addProductURL\n} from \"../../../constants\";\nimport { authAxios } from \"../../../authAxios\";\nimport Select from \"react-select\";\n\nimport { ToastContainer, toast } from \"react-toastify\";\nimport \"react-toastify/dist/ReactToastify.css\";\n\nimport {\n  Form,\n  Button,\n  InputGroup,\n  FormControl,\n  Col,\n  Container\n} from \"react-bootstrap\";\n\nclass AddProduct extends Component {\n  state = {\n    title: \"\",\n    title_local: \"\",\n    stock_count: null,\n    product_image: \"\",\n    productategory: \"\",\n    is_available: true,\n    is_on_sale: false,\n    is_featured: false,\n    item_stock: false,\n\n    id: \"\",\n    success: false,\n    error: null,\n    loading: false,\n    categoryID: 1,\n    productImages: [],\n    selectedImage: \"\",\n    shopID: 1,\n    ShopProductCategory: []\n  };\n\n  componentDidMount() {\n    // this.fetchProductImage();\n    this.fetchProductCategory();\n  }\n\n  handleChange = e => {\n    this.setState({ [e.target.name]: e.target.value });\n  };\n\n  handleChangeCategory = cat => {\n    this.setState(\n      {\n        productategory: cat.id\n      },\n      () => {\n        this.fetchProductImage();\n      }\n    );\n  };\n\n  handleChangeImage = image => {\n    this.setState({ product_image: image.id });\n    this.setState({ selectedImage: image.image1 });\n  };\n\n  handleChangeCheckBox = e => {\n    this.setState({ [e.target.name]: e.target.checked });\n  };\n\n  fetchProductCategory = () => {\n    // const ownerID = this.props.userID;\n    const ownerID = this.props.user.user.id;\n    this.setState({ loading: true });\n    // authAxios\n    axios\n      .get(ShopProductCategoryURL(ownerID))\n      .then(res => {\n        this.setState({ ShopProductCategory: res.data, loading: false });\n      })\n      .catch(err => {\n        this.setState({ error: err, loading: false });\n      });\n  };\n\n  fetchProductImage = () => {\n    const productategory = this.state.productategory;\n    this.setState({ loading: true });\n    // authAxios\n    axios\n      .get(productImagesURL(productategory))\n      .then(res => {\n        this.setState({ productImages: res.data, loading: false });\n      })\n      .catch(err => {\n        this.setState({ error: err, loading: false });\n      });\n  };\n\n  handleCreateItem = e => {\n    e.preventDefault();\n    const userID = this.props.user.user.id;\n\n    // console.log(userID);\n    const {\n      title,\n      title_local,\n      stock_count,\n      productategory,\n      product_image,\n      is_available,\n      is_on_sale,\n      is_featured,\n      item_stock\n    } = this.state;\n    authAxios\n      .post(addProductURL, {\n        userID,\n        title,\n        title_local,\n        stock_count,\n        productategory,\n        product_image,\n        is_available,\n        is_on_sale,\n        is_featured,\n        item_stock\n      })\n      .then(res => {\n        this.setState({\n          saving: false,\n          success: true\n        });\n      })\n      .catch(err => {\n        this.setState({ error: err });\n      });\n  };\n\n  render() {\n    // console.log(this.state.selectedImage);\n    // console.log(this.props.userID);\n    // console.log(123);\n    const {\n      success,\n      error,\n      loading,\n      id,\n      title,\n      title_local,\n      stock_count,\n      is_available,\n      is_on_sale,\n      is_featured,\n      item_stock,\n      productategory\n    } = this.state;\n\n    // console.log(this.props.user.user.id);\n\n    if (success) {\n      return <Redirect to=\"/shop-product-list\" />;\n    }\n    if (!this.props.token) {\n      return <Redirect to=\"/login\" />;\n    }\n    return (\n      <Container>\n        {this.state.loading && <div className=\"loading-cls\"></div>}\n        <Form onSubmit={this.handleCreateItem}>\n          <Form.Group controlId=\"title\">\n            <Form.Label>Product Name</Form.Label>\n            <Form.Control\n              type=\"text\"\n              name=\"title\"\n              value={title || \"\"}\n              onChange={this.handleChange}\n            />\n          </Form.Group>\n          <Form.Group controlId=\"title\">\n            <Form.Label>Product Local Name</Form.Label>\n            <Form.Control\n              type=\"text\"\n              name=\"title_local\"\n              value={title_local || \"\"}\n              onChange={this.handleChange}\n            />\n          </Form.Group>\n          <Form.Group controlId=\"stock_count\">\n            <Form.Label>Stock Count</Form.Label>\n            <Form.Control\n              type=\"text\"\n              name=\"stock_count\"\n              value={stock_count || \"\"}\n              onChange={this.handleChange}\n            />\n          </Form.Group>\n\n          <div>\n            <Select\n              className=\"mb-3\"\n              onChange={this.handleChangeCategory}\n              getOptionLabel={option => `${option.name}`}\n              getOptionValue={option => `${option}`}\n              options={this.state.ShopProductCategory}\n              isSearchable={true}\n              placeholder={\"Select product category\"}\n            />\n          </div>\n          <div>\n            <Select\n              className=\"mb-3\"\n              onChange={this.handleChangeImage}\n              getOptionLabel={option => `${option.name}`}\n              getOptionValue={option => `${option}`}\n              options={this.state.productImages}\n              isSearchable={true}\n              noOptionsMessage={() => null}\n              placeholder={\"Select image\"}\n            />\n          </div>\n          {this.state.selectedImage ? (\n            <Col xs={8} md={4}>\n              <Image src={this.state.selectedImage} loading=\"lazy\" fluid />\n            </Col>\n          ) : null}\n\n          <Form.Group controlId=\"on_sale\">\n            <Form.Check\n              type=\"checkbox\"\n              label=\"On sale\"\n              name=\"is_on_sale\"\n              checked={is_on_sale}\n              onChange={this.handleChangeCheckBox}\n            />\n          </Form.Group>\n\n          <Form.Group controlId=\"is_available\">\n            <Form.Check\n              type=\"checkbox\"\n              name=\"is_available\"\n              label=\"In stock\"\n              checked={is_available}\n              onChange={this.handleChangeCheckBox}\n            />\n          </Form.Group>\n          {/* <Form.Group controlId=\"is_feautured\">\n            <Form.Check\n              type=\"checkbox\"\n              label=\"Feautured product\"\n              name=\"is_featured\"\n              checked={is_featured}\n              onChange={this.handleChangeCheckBox}\n            />\n          </Form.Group> */}\n\n          <Form.Group controlId=\"item_stock\">\n            <Form.Check\n              type=\"checkbox\"\n              label=\"Manage stock from product\"\n              name=\"item_stock\"\n              checked={item_stock}\n              onChange={this.handleChangeCheckBox}\n            />\n          </Form.Group>\n\n          <Button variant=\"primary\" type=\"submit\">\n            Submit\n          </Button>\n        </Form>\n      </Container>\n    );\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    token: state.auth.token,\n    user: state.user\n  };\n};\n\nexport default connect(mapStateToProps)(AddProduct);\n"],"sourceRoot":""}